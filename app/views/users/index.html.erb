<% provide(:title, "All Users") %>
<h1>Search for Users</h1>

<%= will_paginate %>
  <ul class="users">
    <% @users.each do |user| %>
      <li>
        <%= gravatar_for(user, size: 50) %>
        <%= link_to full_name(user), user %>
         <%# the second condition does not allow admin to delete itself!!! %>
        <% if current_user.admin? && !current_user?(user)   #check if current user is admin & check if user is not current user   %>
          | <%= link_to "delete", user,  method: :delete, data: { confirm: "This action is NOT reversible. Proceed with deleting: #{ full_name(user) }?"} %>
        <% end %>
      </li>
    <% end %>
  </ul>
<%= will_paginate %>